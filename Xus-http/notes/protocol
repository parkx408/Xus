* Auth levels for accts: Grand Poobah, Poobah, Prole

Grand Poobahs may create new topic spaces
Poobahs own topic spaces, can destroy their own spaces, appoint other poobahs, and invite proles
Proles can create topics and destroy their own topics

Grand Poobahs may create accounts, create and destroy topic spaces, and assign Poobahs

Poobahs may destroy their own topic spaces, and assign other Poobahs for their topic spaces

* Security is done using SHA-256 as follows:

	* Accounts have an id (32 byte), password (32 byte), and nick name
	  Password is only exchanged during account creation
	  Verification is done using the message signature technique below
	  The server knows your password and id and it uses them to sign for verification to you

	* Message Signature
	  add X-XUS-Password: <id> <password> to headers
	  take date header and X-XUS-headers, except for X-XUS-Signature, in alphabetical order and prepend them to the body
	  terminate them with CRNL, compute SHA-256, convert to base 64.
	  DO NOT TRANSMIT the X-XUS-Password header (only use it to compute the signature)

Messages:

* CONNECT
Request:
X-XUS-Command: connect
X-XUS-Challenge: <random stuff>
X-XUS-Account: account id
X-XUS-Signature: signature of message with passphrase

Response:
OK or 403 (forbidden)
X-XUS-Response: <returned random stuff>
X-XUS-Challenge: <random stuff>
X-XUS-Signature: <signature>

Request:
X-XUS-Command: confirm
X-XUS-Response: <returned random stuff>
X-XUS-Signature: <signature>

Response: 
OK or 403


* CREATE ACCOUNT (should use https)
X-XUS-Command: createAccount
X-XUS-Account: account id (must be a Grand Poobah)
X-XUS-Signature: signature of message using old password
X-XUS-NewAccount: new account id
X-XUS-Password: new account password

Response: 
OK or 403


* DELETE ACCOUNT
X-XUS-Command: deleteAccount
X-XUS-Account: account id (must be a Grand Poobah or account itself)
X-XUS-Signature: signature
X-XUS-DeadAccount: new account id


* CHANGE PASSWORD (should use https)
X-XUS-Command: changePassword
X-XUS-Account: account id (must be a Grand Poobah or account itself)
X-XUS-Signature: signature of message with passphrase
X-XUS-Password: new password


* CREATE TOPIC SPACE
X-XUS-Command: createTopicSpace
X-XUS-Account: account id (must be a Grand Poobah)
X-XUS-Signature: signature of message with passphrase
X-XUS-TopicSpace: name


* DELETE TOPIC SPACE
X-XUS-Command: deleteTopicSpace
X-XUS-Account: account id (must be a Grand Poobah)
X-XUS-Signature: signature of message with passphrase
X-XUS-TopicSpace: name

* ADD POOBAH
X-XUS-Command: addPoobah
X-XUS-Account: account id (must be a Grand Poobah or a current Poobah of this space)
X-XUS-Signature: signature of message with passphrase
X-XUS-TopicSpace: name
X-XUS-Poobah: account id

* REMOVE POOBAH
X-XUS-Command: removePoobah
X-XUS-Account: account id (must be a Grand Poobah or a current Poobah of this space)
X-XUS-Signature: signature of message with passphrase
X-XUS-TopicSpace: name
X-XUS-Poobah: account id

* ADD TOPIC
X-XUS-Command: addTopic
X-XUS-Account: account id (must be a Grand Poobah or a Poobah of this space)
X-XUS-Signature: signature of message with passphrase
X-XUS-TopicSpace: name
X-XUS-Topic: name

* ADD PROLE
X-XUS-Command: addProle
X-XUS-Account: account id (must be a Grand Poobah or current Poobah of this space)
X-XUS-Signature: signature of message with passphrase
X-XUS-TopicSpace: name
X-XUS-Topic: name
X-XUS-Novice: account id

* REMOVE NOVICE
X-XUS-Command: removeNovice
X-XUS-Account: account id (must be a Grand Poobah or current Poobah of this space)
X-XUS-Signature: signature of message with passphrase
X-XUS-TopicSpace: name
X-XUS-Topic: name
X-XUS-Novice: account id

* MULTICAST
X-XUS-Command: multicast
X-XUS-Account: account id (must be a Grand Poobah or current Poobah of this space)
X-XUS-Signature: signature of message with passphrase
X-XUS-TopicSpace: name
X-XUS-Topic: name
<content is message>

* UNICAST
X-XUS-Command: unicast
X-XUS-Account: account id (must be a Grand Poobah or current Poobah of this space)
X-XUS-Signature: signature of message with passphrase
X-XUS-TopicSpace: name
X-XUS-Topic: name
<content is message>

* ANYCAST
X-XUS-Command: anycast
X-XUS-Account: account id (must be a Grand Poobah or current Poobah of this space)
X-XUS-Signature: signature of message with passphrase
X-XUS-TopicSpace: name
X-XUS-Topic: name
<content is message>

* FETCH
X-XUS-Command: anycast
X-XUS-Account: account id (must be a Grand Poobah or current Poobah of this space)
X-XUS-Signature: signature of message with passphrase

Reponse is one or more packets (if more than one, it is a multipart MIME msg)

RESPONSE PACKETS:

* MULTICAST RESPONSE
X-XUS-Response: multicast
X-XUS-From: account id
X-XUS-Topic-Space: name
X-XUS-Topic: name
<content is message>

* UNICAST RESPONSE
X-XUS-Response: unicast
X-XUS-From: account id
X-XUS-Topic-Space: name
X-XUS-Topic: name
<content is message>

* ANYCAST RESPONSE
X-XUS-Response: anycast
X-XUS-From: account id
X-XUS-Topic-Space: name
X-XUS-Topic: name
<content is message>

* JOINED RESPONSE
X-XUS-Response: joined
X-XUS-Account: account id
X-XUS-Topic-Space: name
X-XUS-Topic: name

* LEFT RESPONSE
X-XUS-Response: left
X-XUS-Account: account id
X-XUS-Topic-Space: name
X-XUS-Topic: name
