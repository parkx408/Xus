<html>
<head>
<script src="/xus.js"></script>
<script>
  function prep() {
    if (window.MozWebSocket) window.WebSocket = window.MozWebSocket;
    xusServer = new xus.Server();
    peer = xus.createDirectPeer(xusServer)
    xus.xusToProxy(xusServer, document.location.hash.substring(1), true);
    peer.listen('x', true, function (key, value){setX(value)});
  }
  function setX(value) {
    document.getElementById('x').value = value
  }
  function newX(value) {
    peer.set('x', value);
  }
</script>
</head>
<body onload="prep()">
Value of X: <input id="x" type="text" onchange="newX(this.value)"></input>
</body>
</html>
